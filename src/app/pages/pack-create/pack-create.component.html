<div class="mb-4 flex items-center justify-between">
  <h2 class="text-lg font-semibold text-gray-900 dark:text-white">Create Pack</h2>

  <a
    routerLink="/packs"
    class="px-4 py-2 text-sm rounded-lg border border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-white/[0.05]"
  >
    Back
  </a>
</div>

<div *ngIf="error" class="text-red-500 mb-3">{{ error }}</div>

<div class="rounded-2xl border border-gray-200 bg-white p-4 dark:border-gray-800 dark:bg-white/[0.03]">
  <form [formGroup]="form" (ngSubmit)="save()" class="space-y-4">

    <!-- HOTEL + DESTINATION SELECT -->
    <div class="grid gap-4 md:grid-cols-2">
      <div>
        <label class="text-sm text-gray-600 dark:text-gray-300">Hotel *</label>
        <select
          formControlName="hotelId"
          class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm dark:border-gray-800 dark:bg-white/[0.03] dark:text-white"
        >
          <option [ngValue]="null">Select hotel</option>
          <option *ngFor="let h of hotels" [ngValue]="h.id">
            {{ h.name }} ({{ h.city || '-' }} / {{ h.country || '-' }})
          </option>
        </select>

        <div class="mt-2 text-xs text-gray-500 dark:text-gray-400" *ngIf="selectedHotel">
          Selected hotel stars: <span class="font-semibold">⭐ {{ selectedHotel.stars || '—' }}</span>
        </div>
      </div>

      <div>
        <label class="text-sm text-gray-600 dark:text-gray-300">Destination *</label>
        <select
          formControlName="destinationId"
          class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm dark:border-gray-800 dark:bg-white/[0.03] dark:text-white"
        >
          <option [ngValue]="null">Select destination</option>
          <option *ngFor="let d of destinations" [ngValue]="d.id">
            {{ d.name }} ({{ d.country }})
          </option>
        </select>

        <div class="mt-2 text-xs text-gray-500 dark:text-gray-400" *ngIf="selectedDestination">
          Destination: <span class="font-semibold">{{ selectedDestination.name }}</span>
        </div>
      </div>
    </div>

    <!-- MAIN FIELDS -->
    <div class="grid gap-4 md:grid-cols-2">
      <div>
        <label class="text-sm text-gray-600 dark:text-gray-300">Name *</label>
        <input formControlName="name"
          class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm dark:border-gray-800 dark:bg-white/[0.03] dark:text-white" />
      </div>

      <div>
        <label class="text-sm text-gray-600 dark:text-gray-300">Country *</label>
        <input formControlName="country"
          class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm dark:border-gray-800 dark:bg-white/[0.03] dark:text-white" />
      </div>

      <div>
        <label class="text-sm text-gray-600 dark:text-gray-300">Location</label>
        <input formControlName="location"
          class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm dark:border-gray-800 dark:bg-white/[0.03] dark:text-white" />
      </div>

      <div class="grid gap-4 grid-cols-3">
        <div>
          <label class="text-sm text-gray-600 dark:text-gray-300">Days *</label>
          <input type="number" formControlName="days"
            class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm dark:border-gray-800 dark:bg-white/[0.03] dark:text-white" />
        </div>

        <div>
          <label class="text-sm text-gray-600 dark:text-gray-300">Price *</label>
          <input type="number" formControlName="price"
            class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm dark:border-gray-800 dark:bg-white/[0.03] dark:text-white" />
        </div>

      </div>
    </div>

    <div>
      <label class="text-sm text-gray-600 dark:text-gray-300">Images (comma separated)</label>
      <input formControlName="imagesText"
        placeholder="https://.../1.jpg, https://.../2.jpg"
        class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm dark:border-gray-800 dark:bg-white/[0.03] dark:text-white" />
    </div>

    <div class="grid gap-4 lg:grid-cols-2">
      <div>
        <label class="text-sm text-gray-600 dark:text-gray-300">Description</label>
        <textarea rows="4" formControlName="description"
          class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm dark:border-gray-800 dark:bg-white/[0.03] dark:text-white"></textarea>
      </div>

      <div>
        <label class="text-sm text-gray-600 dark:text-gray-300">About</label>
        <textarea rows="4" formControlName="about"
          class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm dark:border-gray-800 dark:bg-white/[0.03] dark:text-white"></textarea>
      </div>
    </div>

    <!-- ACTIVITIES -->
    <div class="rounded-xl border border-gray-200 p-4 dark:border-gray-800">
      <div class="flex items-center justify-between mb-3">
        <div class="font-medium text-gray-900 dark:text-white">Programme</div>
        <button type="button" (click)="addActivity()"
          class="px-3 py-1.5 text-xs rounded-lg border border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-white/[0.05]">
          + Add
        </button>
      </div>

      <div formArrayName="activities" class="space-y-2">
        <div *ngFor="let a of activities.controls; let i=index" [formGroupName]="i"
          class="grid gap-2 md:grid-cols-6 items-start">
          <div class="md:col-span-1">
            <input type="number" formControlName="day"
              class="w-full rounded-lg border border-gray-200 px-3 py-2 text-sm dark:border-gray-800 dark:bg-white/[0.03] dark:text-white" />
          </div>
          <div class="md:col-span-4">
            <input formControlName="activity"
              class="w-full rounded-lg border border-gray-200 px-3 py-2 text-sm dark:border-gray-800 dark:bg-white/[0.03] dark:text-white"
              placeholder="Activity..." />
          </div>
          <div class="md:col-span-1 flex justify-end">
            <button type="button" (click)="removeActivity(i)"
              class="px-3 py-2 text-xs rounded-lg bg-red-600 text-white hover:bg-red-700">
              Remove
            </button>
          </div>
        </div>
      </div>
    </div>

    <div class="rounded-2xl border border-gray-200 bg-white p-4 dark:border-gray-800 dark:bg-white/[0.03]">
  <div class="mb-3 flex items-center justify-between">
    <div class="font-medium text-gray-900 dark:text-white">FAQ</div>
    <button
      type="button"
      (click)="addFaq()"
      class="px-3 py-1.5 text-xs rounded-lg border border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-white/[0.05]"
    >
      + Add FAQ
    </button>
  </div>

  <div formArrayName="faq" class="space-y-3">
    <div
      *ngFor="let f of faq.controls; let i = index"
      [formGroupName]="i"
      class="rounded-xl border border-gray-200 p-4 dark:border-gray-800"
    >
      <div class="grid gap-3 md:grid-cols-2">
        <div>
          <label class="text-xs text-gray-500 dark:text-gray-400">Question</label>
          <input
            formControlName="question"
            class="mt-1 w-full rounded-lg border border-gray-200 bg-transparent px-3 py-2 text-sm dark:border-gray-700"
          />
        </div>

        <div>
          <label class="text-xs text-gray-500 dark:text-gray-400">Answer</label>
          <input
            formControlName="answer"
            class="mt-1 w-full rounded-lg border border-gray-200 bg-transparent px-3 py-2 text-sm dark:border-gray-700"
          />
        </div>
      </div>

      <div class="mt-3 flex items-center justify-end">
        <button
          type="button"
          (click)="removeFaq(i)"
          class="px-3 py-1.5 text-xs rounded-lg bg-red-600 text-white hover:bg-red-700"
        >
          Remove
        </button>
      </div>
    </div>
  </div>
</div>

<div class="rounded-2xl border border-gray-200 bg-white p-4 dark:border-gray-800 dark:bg-white/[0.03]">
  <div class="mb-3 flex items-center justify-between">
    <div class="font-medium text-gray-900 dark:text-white">Nearby</div>
    <button
      type="button"
      (click)="addNearby()"
      class="px-3 py-1.5 text-xs rounded-lg border border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-white/[0.05]"
    >
      + Add Nearby
    </button>
  </div>

  <div formArrayName="nearby" class="space-y-3">
    <div
      *ngFor="let n of nearby.controls; let i = index"
      [formGroupName]="i"
      class="rounded-xl border border-gray-200 p-4 dark:border-gray-800"
    >
      <div class="grid gap-3 md:grid-cols-2">
        <div>
          <label class="text-xs text-gray-500 dark:text-gray-400">Name</label>
          <input
            formControlName="name"
            class="mt-1 w-full rounded-lg border border-gray-200 bg-transparent px-3 py-2 text-sm dark:border-gray-700"
          />
        </div>

        <div>
          <label class="text-xs text-gray-500 dark:text-gray-400">Distance</label>
          <input
            formControlName="distance"
            placeholder="e.g. 2 KM"
            class="mt-1 w-full rounded-lg border border-gray-200 bg-transparent px-3 py-2 text-sm dark:border-gray-700"
          />
        </div>
      </div>

      <div class="mt-3 flex items-center justify-end">
        <button
          type="button"
          (click)="removeNearby(i)"
          class="px-3 py-1.5 text-xs rounded-lg bg-red-600 text-white hover:bg-red-700"
        >
          Remove
        </button>
      </div>
    </div>
  </div>
</div>


    <!-- ACTIONS -->
    <div class="flex items-center justify-end gap-2">
      <button
        type="submit"
        [disabled]="saving"
        class="px-4 py-2 text-sm rounded-lg bg-brand-500 text-white disabled:opacity-60"
      >
        {{ saving ? 'Saving...' : 'Save' }}
      </button>
    </div>
  </form>
</div>
